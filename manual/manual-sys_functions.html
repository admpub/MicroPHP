<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>系统函数_MicroPHP手册_MicroPHP_真正的敏捷PHP开发框架</title>
        <meta name="keywords" content="系统函数,MicroPHP,PHP框架,PHP开发,PHP敏捷开发"/>
        <meta name="description" content="

		getInstance()


		获取当前控制器实例，用于在类库中使用。比如在类库中可以通过：
		$core=getInstance();
		$core->db操作数据库。





		url()



    url()用来生成url链接。
    可以在第一个参数开始加上:#用来控制url中显示入口文件名称和?用来控制url,MicroPHP是一个免费、开源、敏捷的MVC模式的PHP开发框架。它易拓展而不失灵活，可以轻松对应大中小型项目。MicroPHP没有大而全的功能，只给你最需要的底层功能，但是给你无限的灵活拓展能力。"/>
        <link rel="icon" href="public/microphp_res/images/favicon.ico" type="image/x-icon" />
<link rel="shortcut icon" href="public/microphp_res/images/favicon.ico" type="image/x-icon" />
<link rel="stylesheet" href="public/ui/css/bootstrap.min.css"/><link rel="stylesheet" href="public/ui/css/bootstrap-theme.min.css"/><link rel="stylesheet" href="public/microphp_res/css/buttons.css"/><link rel="stylesheet" href="public/microphp_res/css/style.css?ver=2.4"/>    </head>
    <body  class="">
        <div><!--body container start-->
                <div class="container ">
            <div class="row">
                                    <div class="col-sm-12 col-md-3 manual_left">
                            <script>var html = true;</script>
    <ul class="nav nav-pills nav-stacked nav-list nav_manual">
        <h2><small><i class="glyphicon glyphicon-list"></i></small>目录</h2>
                <li><a class="" href="manual-about_microphp.html" key="about_microphp"><strong>MicroPHP详细介绍</strong></a></li>
                <li><a class="" href="manual-sysconfig.html" key="sysconfig"><strong>系统配置说明</strong></a></li>
                <li><a class="" href="manual-form_validator.html" key="form_validator"><strong>表单验证</strong></a></li>
                <li><a class="" href="manual-error_control.html" key="error_control"><strong>错误控制</strong></a></li>
                <li><a class="active" href="manual-sys_functions.html" key="sys_functions"><strong>系统函数</strong></a></li>
                <li><a class="" href="manual-database_manual.html" key="database_manual"><strong>数据库手册</strong></a></li>
                <li><a class="" href="manual-output.html" key="output"><strong>输出</strong></a></li>
                <li><a class="" href="manual-config.html" key="config"><strong>获取配置</strong></a></li>
                <li><a class="" href="manual-library.html" key="library"><strong>使用类库</strong></a></li>
                <li><a class="" href="manual-view.html" key="view"><strong>使用视图</strong></a></li>
                <li><a class="" href="manual-router.html" key="router"><strong>URL路由</strong></a></li>
                <li><a class="" href="manual-console.html" key="console"><strong>命令行下的MicroPHP</strong></a></li>
                <li><a class="" href="manual-plugin.html" key="plugin"><strong>插件模式</strong></a></li>
                <li><a class="" href="manual-core_ext.html" key="core_ext"><strong>拓展核心</strong></a></li>
                <li><a class="" href="manual-cache.html" key="cache"><strong>缓存</strong></a></li>
                <li><a class="" href="manual-autoload.html" key="autoload"><strong>自动加载</strong></a></li>
                <li><a class="" href="manual-helper.html" key="helper"><strong>helper文件</strong></a></li>
                <li><a class="" href="manual-dbcfg.html" key="dbcfg"><strong>数据库配置</strong></a></li>
                <li><a class="" href="manual-database.html" key="database"><strong>连接数据库</strong></a></li>
                <li><a class="" href="manual-model.html" key="model"><strong>使用模型</strong></a></li>
                <li><a class="" href="manual-controller.html" key="controller"><strong>控制器</strong></a></li>
                <li><a class="" href="manual-name.html" key="name"><strong>命名规则</strong></a></li>
                <li><a class="" href="manual-pagebar.html" key="pagebar"><strong>分页条</strong></a></li>
                <li><a class="" href="manual-hmvc.html" key="hmvc"><strong>HMVC模式</strong></a></li>
                <li><a class="" href="manual-input.html" key="input"><strong>Input输入_获取输入数据</strong></a></li>
                <li><a class="" href="manual-table_model.html" key="table_model"><strong>表模型</strong></a></li>
            </ul>
                    </div>
                    <div class="manual_nav_fix"></div>
                
                <div class="col-sm-12  manual_right  col-sm-9">
                    <iframe id="manual_iframe" name="manual_iframe" scrolling="no" width="100%" style="display: none;" frameborder="0" src="about:blank"></iframe>
                    <div class="panel panel-collapse panel-primary">
                        <div class="panel-heading">
                            系统函数                        </div>
                        <div class="panel-body">
                            <div class="panel panel-default">
	<div class="panel-heading">
		<strong>getInstance()</strong>
	</div>
	<div class="panel-body">
		获取当前控制器实例，用于在类库中使用。比如在类库中可以通过：<br/>
		$core=getInstance();<br/>
		$core->db操作数据库。
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<strong>url()</strong>
	</div>
	<div class="panel-body">
<pre style="border:none;background:none">
    url()用来生成url链接。
    可以在第一个参数开始加上:#用来控制url中显示入口文件名称和?用来控制url使用相对路经。
    默认不显示入口文件名称，使用绝对路经。
    $system['url_rewrite'] = FALSE;时的使用示例：
    1. url('#?')
    2. url('#?welcome.index')
    3. url('?#welcome.index','aa','bb')
    4. url('?welcome.index',array('a'=>'bb','b'=>'ccc'),'dd','ee')
    5. url('#welcome.index',array('a'=>'bb','b'=>'ccc'))
    6. url('welcome.index','dd','ee',array('a'=>'bb'))
    7. url('','aa','bb')
    8. url('',array('a'=>'bb','b'=>'ccc'),'dd','ee')
    9. url('',array('a'=>'bb','b'=>'ccc'))
    示例输出如下：
    1. indexfortest.php
    2. indexfortest.php?welcome.index
    3. indexfortest.php?welcome.index/aa/bb
    4. ?welcome.index/dd/ee&a=bb&b=ccc
    5. /microphp/tests/indexfortest.php?welcome.index&a=bb&b=ccc
    6. /microphp/tests/?welcome.index/dd/ee&a=bb
    7. /microphp/tests/?aa/bb
    8. /microphp/tests/?dd/ee&a=bb&b=ccc
    9. /microphp/tests/?a=bb&b=ccc
</pre>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<strong>urlPath($subpath = null)</strong>
	</div>
	<div class="panel-body">
<pre style="border:none;background:none">
  urlPath($subpath = null)，获取入口文件所在目录url路径。
  只能在web访问时使用，在命令行下面会抛出异常。
  $subpath  子路径或者文件路径，如果非空就会被附加在入口文件所在目录的后面
  使用示例：
  1. urlPath('..public/test/')
  示例输出如下：
  1. /microphppublic/test
</pre>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<strong>path($subpath = null)</strong>
	</div>
	<div class="panel-body">
<pre style="border:none;background:none">
  path($subpath = null)，获取入口文件所在目录绝对路径。
  $subpath 子路径或者文件路径，如果非空就会被附加在入口文件所在目录的绝对路径后面
  使用示例：
  1. path('public/test/')
  示例输出如下：
  1. /home/pm/gitcode/microphp/testspublic/test
</pre>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<strong>dump($arg=null,$_)</strong>
	</div>
	<div class="panel-body">
<pre style="border:none;background:none">
  dump($arg=null,$_)，打印变量内容，参数和var_dump一样。
</pre>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<strong>trigger404($msg = '&lt;h1&gt;Not Found&lt;/h1&gt;')</strong>
	</div>
	<div class="panel-body">
		输出404页面，当$system里面设置的404文件存在就使用设置的文件，否则默认 <br />
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<strong>trigger500($msg = '<span>&lt;h1&gt;Server Error&lt;/h1&gt;</span>')</strong>
	</div>
	<div class="panel-body">
		输出500页面，当$system里面设置的50x文件存在就使用设置的文件，否则默认
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		<strong>forceDownload($download_filename, $data)</strong>
	</div>
	<div class="panel-body">
		强制下载，支持中文名称
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		<strong>getRsCol($rows, $col_name)</strong>
	</div>
	<div class="panel-body">
		获取结果集中的一个字段的数组
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<strong>chRsKey($rs, $col)</strong>
	</div>
	<div class="panel-body">
<pre style="border:none;background:none">
  改变结果集数组key
  比如：
  $rs=array(array('user_id'=>123),array('user_id'=>456));
  $rs=chRsKey($rs, 'user_id')
  $rs变为了：
    array('123'=>array('user_id'=>123),'456'=>array('user_id'=>456));
</pre>
	</div>
</div>

<div class="panel panel-default">
	<div class="panel-heading">
		<strong>sortRs($rows, $col_name, $order = 'asc')</strong>
	</div>
	<div class="panel-body">
		按字段对结果集进行排序
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		<strong>mergeRs()</strong>
	</div>
	<div class="panel-body">
		合并多个结果集，参数是多个：array($rs,$column_name)，$column_name是该结果集和  其它结果集关联的字段 <br />
比如：<br />
$rs1=array(array('a'=&gt;'1111','b'=&gt;'fasdfas'),array('a'=&gt;'222','b'=&gt;'fasdfas'),array('a'=&gt;'333','b'=&gt;'fasdfas')); <br />
$rs2=array(array('c'=&gt;'1111','r'=&gt;'fasd22fas'),array('c'=&gt;'222','r'=&gt;'fasd22fas'),array('c'=&gt;'333','r'=&gt;'fasdf22as')); <br />
$rs3=array(array('a'=&gt;'1111','e'=&gt;'fasd33fas'),array('a'=&gt;'222','e'=&gt;'fas33dfas'),array('a'=&gt;'333','e'=&gt;'fas33dfas')); <br />
var_dump(mergeRs(array($rs1,'a'),array($rs2,'c'),array($rs3,'a'))); <br /><br />
上面的例子中三个结果集中的关联字段是$rs1.a=$rs2.c=$rs3.a
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		<strong>sessionStart()</strong>
	</div>
	<div class="panel-body">
		安全启用session，避免重复启用session。
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		<strong>systemInfo($key = NULL)</strong>
	</div>
	<div class="panel-body">
		获取系统配置信息,也就是CoreLoader::$system里面的信息,$key是CoreLoader::$system的键。
	</div>
</div>
<div class="panel panel-default">
	<div class="panel-heading">
		<strong>dbInfo($group = NULL, $key = NULL)</strong>
	</div>
	<div class="panel-body">
		获取系统数据库配置信息。
$group是数据库组名称，即CoreLoader::$system['db']的键。
$group为null时返回默认的配置组,即CoreLoader::$system['db']['active_group']指定的组。
$key就是配置组的键,指定了$key可以获取指定组的键对应的值
	</div>
</div>                        </div>
                    </div>
                                    </div>
                <div class="clearfix visible-xs"></div>
            </div>
            </div><!--body container end-->
<div class="copyright">
    <div class="container center-block">
        <p>Powered By <a target="_blank" href="http://www.host900.com/">狂奔的蜗牛</a>
            | <a href="http://git.oschina.net/snail/microphp/tags" target="_blank">历史版本</a>
            | <a href="http://git.oschina.net/snail/microphp/tree/development/modules"target="_blank">源代码</a>
            | <a href="?in.action/8">快速入门</a>
            | <a href="http://www.oschina.net/p/microphp">MicroPHP@开源中国</a></p>
        <p>源代码许可证 <a target="_blank" href="http://www.apache.org/licenses/LICENSE-2.0" target="_blank">Apache License v2.0</a></p>
        <p>MicroPHP官方QQ交流群 : 42807575 , 有问题欢迎加群交流</p>
    </div>
</div>
<div id="gotoTop" title="返回顶部"></div>
            <script type="text/javascript">
    var duoshuoQuery = {short_name: "microphp"};
    (function() {
        var ds = document.createElement('script');
        ds.type = 'text/javascript';
        ds.async = true;
        ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
        ds.charset = 'UTF-8';
        (document.getElementsByTagName('head')[0]
                || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
</script>
<script src="public/ui/jquery.js"></script><script src="public/ui/js/bootstrap.min.js"></script><script src="public/microphp_res/js/buttons.js"></script><script src="public/microphp_res/js/run_prettify.js"></script><script src="public/microphp_res/js/scroll.js"></script><script src="public/microphp_res/js/style.js?ver=2.8"></script><div style="display: none;"><script type="text/javascript">
    var _bdhmProtocol = (("https:" == document.location.protocol) ? " https://" : " http://");
    document.write(unescape("%3Cscript src='" + _bdhmProtocol + "hm.baidu.com/h.js%3F25dc3c6d2187c5da81c6269c209aa726' type='text/javascript'%3E%3C/script%3E"));
    </script></div>                </body>
</html>